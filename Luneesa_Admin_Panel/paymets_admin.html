<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Payment Services</title>
    <link rel="stylesheet" href="/base_discount.css">
    <link rel="stylesheet" href="/offers.css">
    <link rel="stylesheet" href="/ai_models.css">
    <link rel="stylesheet" href="/coupons.css">
    <link rel="stylesheet" href="/payments.css">
    <!-- Add Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="/utils_admin/tab_switching.js"></script>
    <script src="/utils_admin/event-listeners.js"></script>
    
    <!-- base discount  -->
    <script src="/utils_admin/base_discount/get_base_discount.js"></script>
    <script src="/utils_admin/base_discount/api-service.js"></script>
    <script src="/utils_admin/base_discount/config.js"></script>
    <script src="/utils_admin/base_discount/utils.js"></script>
    <script src="/utils_admin/base_discount/status.js"></script>
    <script src="/utils_admin/base_discount/table.js"></script>
    <script src="/utils_admin/base_discount/validation.js"></script>
    <script src="/utils_admin/base_discount/app.js"></script>
    
    <!-- offers -->
    <script src="utils_admin/offers/get_all_offers.js"></script>
    <script src="/utils_admin/offers/api-service.js"></script>
    <script src="/utils_admin/offers/data.js"></script>
    <script src="/utils_admin/offers/utils.js"></script>
    <script src="/utils_admin/offers/navigation.js"></script>
    <script src="/utils_admin/offers/form-handler.js"></script>
    <script src="/utils_admin/offers/inline-editor.js"></script>
    <script src="/utils_admin/offers/table-manager.js"></script>
    <script src="/utils_admin/offers/search-filter.js"></script>
    <script src="/utils_admin/offers/export-duplicate.js"></script>
    <script src="/utils_admin/offers/event-listeners.js"></script>
    <script src="/utils_admin/offers/app.js"></script>
    
    <!-- ai-models -->
    <script src="/utils_admin/ai_models/get_aI_model_from_server.js"></script>
    <script src="/utils_admin/ai_models/data.js"></script>
    <script src="/utils_admin/ai_models/utils.js"></script>
    <script src="/utils_admin/ai_models/navigation.js"></script>
    <script src="/utils_admin/ai_models/form-handler.js"></script>
    <script src="/utils_admin/ai_models/inline-editor.js"></script>
    <script src="/utils_admin/ai_models/table-manager.js"></script>
    <script src="/utils_admin/ai_models/search-filter.js"></script>
    <script src="/utils_admin/ai_models/export-duplicate.js"></script>
    <script src="/utils_admin/ai_models/app.js"></script>
    
    <!-- coupons -->
    <script src="/utils_admin/coupons/get_alloted_coupens.js"></script>
    <script src="/utils_admin/coupons/user-coupons-search.js"></script>
    <script src="/utils_admin/coupons/app.js"></script>
    <script src="/utils_admin/coupons/data.js"></script>
    <script src="/utils_admin/coupons/export-duplicate.js"></script>
    <script src="/utils_admin/coupons/form-handler.js"></script>
    <script src="/utils_admin/coupons//inline-editor.js"></script>
    <script src="/utils_admin/coupons/navigation.js"></script>
    <script src="/utils_admin/coupons/search-filter.js"></script>
    <script src="/utils_admin/coupons/table-manager.js"></script>
    <script src="/utils_admin/coupons/utils.js"></script>
    
    <!-- payments -->
    <script src="/utils_admin/payments/navigation.js"></script>
    
    <!-- token allocation -->
    <script src="/utils_admin/payments/allot_tokens/notifications.js"></script>
    <script src="/utils_admin/payments/allot_tokens/data-handler.js"></script>
    <script src="/utils_admin/payments/allot_tokens/api-handler.js"></script>
    <script src="/utils_admin/payments/allot_tokens/json-handler.js"></script>
    <script src="/utils_admin/payments/allot_tokens/bulk-manager.js"></script>
    <script src="/utils_admin/payments/allot_tokens/results-display.js"></script>
    <script src="/utils_admin/payments/allot_tokens/success-display.js"></script>
    <script src="/utils_admin/payments/allot_tokens/forms-handler.js"></script>
    <script src="/utils_admin/payments/allot_tokens/core-system.js"></script>
    <script src="/utils_admin/payments/allot_tokens/index.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Admin Payment Services</h1>
        </div>

        <div class="tabs">
            <div class="tab active" id="ai-models-tab-btn">AI-Models</div>
            <div class="tab" id="base-discount-tab-btn">Base discount</div>
            <div class="tab" id="offers-tab-btn">offers</div>
            <div class="tab" id="coupons-tab-btn">coupons</div>
            <div class="tab" id="payments-tab-btn">payments</div>
        </div>

        <div class="content">
            <!-- AI-Models Tab Content -->
            <div class="tab-content active" id="ai-models-content">
                <!-- Sub-tabs for AI-Models section -->
                <div class="ai-sub-tabs" id="aiModelsSubTabs">
                    <div class="ai-sub-tab active" id="ai-models-list-sub-tab-btn">
                        <i class="fas fa-robot"></i> AI Models
                    </div>
                    <div class="ai-sub-tab" id="ai-models-create-sub-tab-btn">
                        <i class="fas fa-plus"></i> Create
                    </div>
                </div>

                <!-- AI Models List Tab Content -->
                <div class="ai-tab-content active" id="aiModelsListContent">
                    <div class="ai-models-layout">
                        <!-- AI Models List -->
                        <div class="ai-models-list" id="aiModelsList">
                            <div class="ai-models-header">
                                <i class="fas fa-robot"></i> <span id="aiModelsListTitle">AI Models List</span>
                            </div>
                            
                            <!-- Search and Filter Controls -->
                            <div class="ai-models-controls" style="padding: 16px; background: #f8fafc; border-bottom: 1px solid #e5e7eb;">
                                <div style="display: grid; grid-template-columns: 1fr auto auto; gap: 12px; align-items: center;">
                                    <div class="ai-search-box">
                                        <input type="text" placeholder="Search AI models..." 
                                               style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;"
                                               id="ai-models-search-input">
                                    </div>
                                    <select id="ai-models-provider-filter" 
                                            style="padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;">
                                        <option value="all">All Providers</option>
                                        <option value="OpenAI">OpenAI</option>
                                        <option value="Anthropic">Anthropic</option>
                                        <option value="Google">Google</option>
                                    </select>
                                    <button class="ai-primary-export" id="ai-models-export-btn" 
                                            style="padding: 8px 12px; font-size: 12px;">
                                        <i class="fas fa-download"></i> Export
                                    </button>
                                </div>
                            </div>
                            
                            <div class="ai-models-table">
                                <table>
                                    <thead>
                                        <tr style="background: linear-gradient(135deg, #7C3AED, #5B21B6);">
                                            <th>Model Name</th>
                                            <th>Provider</th>
                                            <th>Price Per Token</th>
                                            <th>Currency</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="aiModelsTableBody">
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Inline Edit Form (hidden by default) -->
                        <div class="ai-inline-edit-form" id="aiInlineEditForm" style="display: none;">
                            <div class="ai-edit-form-header">
                                <h3><i class="fas fa-edit"></i> <span id="aiEditFormTitle">Edit AI Model</span></h3>
                                <button class="ai-primary-edit-header-cancel" id="ai-models-inline-cancel-btn" style="padding: 6px 12px; font-size: 12px; z-index: 1;">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                            <div class="ai-edit-form-content">
                                <form id="aiInlineModelForm">
                                    <!-- Read-only Database Fields -->
                                    <div class="ai-readonly-section">
                                        <h4><i class="fas fa-database"></i> Database Information</h4>
                                        <div class="ai-form-row">
                                            <div class="ai-form-group">
                                                <label>ID</label>
                                                <input type="text" id="aiInlineModelId" disabled class="readonly-field">
                                            </div>
                                        </div>
                                        <div class="ai-form-row">
                                            <div class="ai-form-group">
                                                <label>Created At</label>
                                                <input type="text" id="aiInlineCreatedAt" disabled class="readonly-field">
                                            </div>
                                            <div class="ai-form-group">
                                                <label>Updated At</label>
                                                <input type="text" id="aiInlineUpdatedAt" disabled class="readonly-field">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Editable Fields -->
                                    <div class="ai-editable-section">
                                        <h4><i class="fas fa-edit"></i> Editable Information</h4>
                                        <div class="ai-form-row">
                                            <div class="ai-form-group">
                                                <label>Model Name *</label>
                                                <input type="text" id="aiInlineModelName" class="readonly-field">
                                            </div>
                                            <div class="ai-form-group">
                                                <label>Provider *</label>
                                                <input type="text" id="aiInlineProvider" placeholder="e.g., OpenAI, Anthropic, Google" required>
                                            </div>
                                        </div>
                                        <div class="ai-form-row">
                                            <div class="ai-form-group">
                                                <label>Price Per Token *</label>
                                                <input type="number" id="aiInlinePricePerToken" step="0.000001" min="0" required>
                                            </div>
                                            <div class="ai-form-group">
                                                <label>Currency</label>
                                                <select id="aiInlineCurrency">
                                                    <option value="USD" selected>USD</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="ai-form-group">
                                            <label>Available Till *</label>
                                            <input type="datetime-local" id="aiInlineAvailableTill" required>
                                        </div>
                                    </div>
                                </form>
                                <div class="ai-inline-form-actions">
                                    <button type="button" class="ai-success" id="ai-models-inline-save-btn">
                                        <i class="fas fa-save"></i> Update Model
                                    </button>
                                    <button type="button" class="ai-primary" id="ai-models-inline-cancel-footer-btn">
                                        <i class="fas fa-times"></i> Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Create AI Model Tab Content -->
                <div class="ai-tab-content" id="aiModelsCreateContent">
                    <div class="ai-create-panel-full">
                        <div class="ai-create-header">
                            <i class="fas fa-plus-circle"></i> <span id="aiCreateHeaderText">Create New AI Model</span>
                        </div>
                        <form id="aiModelForm" class="ai-form-container">
                            <!-- Editable fields only for create -->
                            <div class="ai-form-row">
                                <div class="ai-form-group">
                                    <label>Model Name *</label>
                                    <input type="text" id="aiModelName" placeholder="e.g., gpt-4" required>
                                </div>
                                <div class="ai-form-group">
                                    <label>Provider *</label>
                                    <input type="text" id="aiProvider" placeholder="e.g., OpenAI, Anthropic, Google" required>
                                </div>
                            </div>

                            <div class="ai-form-row">
                                <div class="ai-form-group">
                                    <label>Price Per Token *</label>
                                    <input type="number" id="aiPricePerToken" placeholder="e.g., 0.005" step="0.000001" min="0" required>
                                </div>
                                <div class="ai-form-group">
                                    <label>Currency</label>
                                    <select id="aiCurrency">
                                        <option value="USD" selected>USD</option>
                                    </select>
                                </div>
                            </div>

                            <div class="ai-form-group">
                                <label>Available Till *</label>
                                <input type="datetime-local" id="aiAvailableTill" required>
                            </div>
                        </form>

                        <div class="ai-action-buttons">
                            <button type="button" class="ai-success-create" id="ai-models-save-model-btn">
                                <i class="fas fa-save"></i> Save Model
                            </button>
                            <button type="button" class="ai-primary-create" id="ai-models-clear-form-btn">
                                <i class="fas fa-times"></i> Clear
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Base Discount Tab Content -->
            <div class="tab-content" id="base-discount-content">
                <div class="status-section">
                <div class="status-toggle">
                    <span>Status</span>
                    <div class="toggle-switch active" id="base-discount-status-toggle">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="status-actions">
                    <button class="modify-btn controllable-btn" id="base-discount-modify-btn">Modify</button>
                    <button class="save-status-btn hidden" id="base-discount-save-status-btn">Save Changes</button>
                </div>
            </div>

            <table class="discount-table">
                <thead style="background: linear-gradient(135deg, #8B5CF6, #7C3AED);">
                    <tr>
                        <th>Minimum Value</th>
                        <th>Maximum Value</th>
                        <th>Discount Type</th>
                        <th>Discount Value</th>
                        <th>Created</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="discountTableBody">
                    <!-- <tr data-row="0">
                        <td><span class="readonly-field-base-discount">6</span></td> 
                        <td><span class="readonly-field-base-discount">12</span></td> 
                        <td><span class="readonly-field-base-discount">flat</span></td>
                        <td><span class="readonly-field-base-discount">1.2</span></td> 
                        <td>17 Aug 2025</td>
                        <td><button class="delete-btn controllable-btn" id="base-discount-delete-row-0"><i class="fas fa-trash"></i></button></td>
                    </tr>
                    <tr data-row="1">
                        <td><span class="readonly-field-base-discount">59</span></td> 
                        <td><span class="readonly-field-base-discount">118</span></td> 
                        <td><span class="readonly-field-base-discount">percentage</span></td>
                        <td><span class="readonly-field-base-discount">10</span></td>
                        <td>17 Aug 2025</td>
                        <td><button class="delete-btn controllable-btn" id="base-discount-delete-row-1"><i class="fas fa-trash"></i></button></td>
                    </tr>
                    <tr data-row="2">
                        <td><span class="readonly-field-base-discount">118</span></td>
                        <td><span class="readonly-field-base-discount">235</span></td> 
                        <td><span class="readonly-field-base-discount">flat</span></td>
                        <td><span class="readonly-field-base-discount">12</span></td> 
                        <td>17 Aug 2025</td>
                        <td><button class="delete-btn controllable-btn" id="base-discount-delete-row-2"><i class="fas fa-trash"></i></button></td>
                    </tr>
                    <tr data-row="3">
                        <td><span class="readonly-field-base-discount">12</span></td> 
                        <td><span class="readonly-field-base-discount">59</span></td> 
                        <td><span class="readonly-field-base-discount">percentage</span></td>
                        <td><span class="readonly-field-base-discount">20</span></td>
                        <td>17 Aug 2025</td>
                        <td><button class="delete-btn controllable-btn" id="base-discount-delete-row-3"><i class="fas fa-trash"></i></button></td>
                    </tr> -->
                </tbody>
            </table>

            <div class="add-level-section">
                <button class="add-level-btn controllable-btn" id="base-discount-add-level-btn">Add new level</button>
            </div>

                <div class="save-section">
                    <button class="save-btn controllable-btn" id="base-discount-save-changes-btn">Save Changes</button>
                </div>
            </div>
            
            <!-- Offers Tab Content -->
            <div class="tab-content" id="offers-content">
                <!-- Sub-tabs for Offers section -->
                <div class="sub-tabs" id="offerSubTabs">
                    <div class="sub-tab active" id="offers-sub-tab-btn">
                        <i class="fas fa-list"></i> Offers
                    </div>
                    <div class="sub-tab" id="offers-create-sub-tab-btn">
                        <i class="fas fa-plus"></i> Create
                    </div>
                </div>

                <!-- Offers View Tab Content -->
                <div class="tab-content active" id="offersContent">
                    <div class="offers-layout">
                        <!-- Offers List -->
                        <div class="offers-list" id="offersList">
                            <div class="offers-header">
                                <i class="fas fa-list-alt"></i> <span id="offersListTitle">Offers List</span>
                            </div>
                            
                            <!-- Search and Filter Controls -->
                            <div class="offers-controls" style="padding: 16px; background: #f8fafc; border-bottom: 1px solid #e5e7eb;">
                                <div style="display: grid; grid-template-columns: 1fr auto auto; gap: 12px; align-items: center;">
                                    <div class="search-box">
                                        <input type="text" placeholder="Search offers..." 
                                               style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;"
                                               id="offers-search-input">
                                    </div>
                                    <select id="offers-status-filter" 
                                            style="padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;">
                                        <option value="all">All Status</option>
                                        <option value="active">Active</option>
                                        <option value="paused">Paused</option>
                                        <option value="upcoming">Upcoming</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                    <button class="btn btn-secondary btn-sm" id="offers-export-btn" 
                                            style="padding: 8px 12px; font-size: 12px;">
                                        <i class="fas fa-download"></i> Export
                                    </button>
                                </div>
                            </div>
                            
                            <div class="offers-table">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Title</th>
                                            <th>Discount Value</th>
                                            <th>Created</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="offersTableBody">
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Inline Edit Form (hidden by default) -->
                        <div class="inline-edit-form" id="inlineEditForm" style="display: none;">
                            <div class="edit-form-header">
                                <h3><i class="fas fa-edit"></i> <span id="editFormTitle">Edit Offer</span></h3>
                                <button class="btn btn-secondary btn-sm" id="offers-inline-cancel-btn">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                            <div class="edit-form-content">
                                <form id="inlineOfferForm">
                                    <!-- Read-only Database Fields -->
                                    <div class="readonly-section">
                                        <h4><i class="fas fa-database"></i> Database Information</h4>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label>ID</label>
                                                <input type="text" id="inlineOfferId" disabled class="readonly-field">
                                            </div>
                                            <div class="form-group">
                                                <label>Offer ID</label>
                                                <input type="text" id="inlineOfferIdValue" disabled class="readonly-field">
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label>Created At</label>
                                                <input type="text" id="inlineCreatedAt" disabled class="readonly-field">
                                            </div>
                                            <div class="form-group">
                                                <label>Updated At</label>
                                                <input type="text" id="inlineUpdatedAt" disabled class="readonly-field">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Editable Fields -->
                                    <div class="editable-section">
                                        <h4><i class="fas fa-edit"></i> Editable Information</h4>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label>Title *</label>
                                                <input type="text" id="inlineTitle" required>
                                            </div>
                                            <div class="form-group">
                                                <label>Status</label>
                                                <select id="inlineStatus">
                                                    <option value="active">Active</option>
                                                    <option value="paused">Paused</option>
                                                    <option value="upcoming">Upcoming</option>
                                                    <option value="expired">Expired</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label>Description</label>
                                            <textarea id="inlineDescription" rows="3"></textarea>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label>Offer Code</label>
                                                <input type="text" id="inlineOfferCode" style="text-transform: uppercase;">
                                            </div>
                                            <div class="form-group">
                                                <label>Global Used Count</label>
                                                <input type="tel" id="inlineGlobalUsedCount" min="0" step="1" pattern="[0-9]*" inputmode="numeric">
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label>Discount Type</label>
                                                <select id="inlineDiscountType">
                                                    <option value="percentage">Percentage</option>
                                                    <option value="flat">Flat Amount</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>Discount Value *</label>
                                                <input type="tel" id="inlineDiscountValue" min="0" step="1" pattern="[0-9]*" inputmode="numeric" required>
                                            </div>
                                        </div>
                                        <div class="form-group" id="inlineMaxDiscountGroup">
                                            <label>Max Discount Amount</label>
                                            <input type="tel" id="inlineMaxDiscountAmount" min="0" step="1" pattern="[0-9]*" inputmode="numeric">
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label>Min Purchase Amount</label>
                                                <input type="tel" id="inlineMinPurchaseAmount" min="0" step="1" pattern="[0-9]*" inputmode="numeric">
                                            </div>
                                            <div class="form-group">
                                                <label>Offer Type</label>
                                                <input type="text" id="inlineOfferType" placeholder="e.g., Festival, Referral, Welcome">
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label>Usage Limit</label>
                                                <input type="tel" id="inlineUsageLimit" min="0" step="1" pattern="[0-9]*" inputmode="numeric">
                                            </div>
                                            <div class="form-group">
                                                <label>Usage Limit Per User</label>
                                                <input type="tel" id="inlineUsageLimitPerUser" min="0" step="1" pattern="[0-9]*" inputmode="numeric">
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label>Start Date *</label>
                                                <input type="datetime-local" id="inlineStartDate" required>
                                            </div>
                                            <div class="form-group">
                                                <label>End Date *</label>
                                                <input type="datetime-local" id="inlineEndDate" required>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <div class="inline-form-actions">
                                    <button type="button" class="btn btn-success" id="offers-inline-save-btn">
                                        <i class="fas fa-save"></i> Update Offer
                                    </button>
                                    <button type="button" class="btn btn-secondary" id="offers-inline-cancel-footer-btn">
                                        <i class="fas fa-times"></i> Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Create/Edit Tab Content -->
                <div class="tab-content" id="createContent">
                    <div class="create-panel-full">
                        <div class="create-header">
                            <i class="fas fa-plus-circle"></i> <span id="createHeaderText">Create New Offer</span>
                        </div>
                        <form id="offerForm" class="form-container">
                            <!-- Non-editable fields (hidden for new offers, shown for editing) -->
                            <div class="form-group hidden" id="idField">
                                <label>ID</label>
                                <input type="text" id="offerId" disabled>
                            </div>
                            
                            <div class="form-group hidden" id="offerIdField">
                                <label>Offer ID</label>
                                <input type="text" id="offerIdValue" disabled>
                            </div>

                            <div class="form-row hidden" id="timestampFields">
                                <div class="form-group">
                                    <label>Created At</label>
                                    <input type="text" id="createdAt" disabled>
                                </div>
                                <div class="form-group">
                                    <label>Updated At</label>
                                    <input type="text" id="updatedAt" disabled>
                                </div>
                            </div>

                            <!-- Editable fields -->
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Title *</label>
                                    <input type="text" id="title" placeholder="e.g., New Year Sale" required>
                                </div>
                                <div class="form-group">
                                    <label>Offer Code</label>
                                    <input type="text" id="offerCode" placeholder="e.g., SAVE20" style="text-transform: uppercase;">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Description</label>
                                <textarea id="description" placeholder="Detailed description of the offer"></textarea>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Discount Type *</label>
                                    <select id="discountType" required>
                                        <option value="">Select type</option>
                                        <option value="percentage">Percentage</option>
                                        <option value="flat">Flat Amount</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Discount Value *</label>
                                    <input type="tel" id="discountValue" placeholder="e.g., 20 or 6" min="0" step="0.1" pattern="[0-9]*" inputmode="numeric" required>
                                </div>
                            </div>

                            <div class="form-group" id="maxDiscountGroup">
                                <label>Max Discount Amount</label>
                                <input type="tel" id="maxDiscountAmount" placeholder="Maximum discount cap (for percentage only)" min="0" step="0.1" pattern="[0-9]*" inputmode="numeric">
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Offer Type *</label>
                                    <input type="text" id="offerType" placeholder="e.g., Festival, Referral, Welcome" required>
                                </div>
                                <div class="form-group">
                                    <label>Status</label>
                                    <select id="status">
                                        <option value="active">Active</option>
                                        <option value="paused">Paused</option>
                                        <option value="upcoming">Upcoming</option>
                                        <option value="expired">Expired</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Applicable To</label>
                                <select id="applicableTo">
                                    <option value="all" selected>All Users</option>
                                    <option value="new-users">New Users</option>
                                    <option value="premium-users">Premium Users</option>
                                    <option value="returning-users">Returning Users</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Min Purchase Amount</label>
                                <input type="tel" id="minPurchaseAmount" placeholder="Minimum order value required" min="0" step="0.1" pattern="[0-9]*" inputmode="numeric">
                            </div>

                            <div class="form-group">
                                <label>Applicable Products</label>
                                <select id="applicableProducts">
                                    <option value="all" selected>All Products</option>
                                    <option value="electronics">Electronics</option>
                                    <option value="fashion">Fashion</option>
                                    <option value="home">Home & Garden</option>
                                    <option value="sports">Sports</option>
                                </select>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Usage Limit (Global)</label>
                                    <input type="tel" id="usageLimit" placeholder="Total usage limit" min="0" step="1" pattern="[0-9]*" inputmode="numeric">
                                </div>
                                <div class="form-group">
                                    <label>Usage Limit Per User</label>
                                    <input type="tel" id="usageLimitPerUser" placeholder="Per user limit" min="0" step="1" pattern="[0-9]*" inputmode="numeric">
                                </div>
                            </div>

                            <div class="form-group" id="globalUsedCountGroup" style="display: none;">
                                <label>Global Used Count</label>
                                <input type="tel" id="globalUsedCount" min="0" step="1" pattern="[0-9]*" inputmode="numeric" disabled>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Start Date *</label>
                                    <input type="datetime-local" id="startDate" required>
                                </div>
                                <div class="form-group">
                                    <label>End Date *</label>
                                    <input type="datetime-local" id="endDate" required>
                                </div>
                            </div>
                        </form>

                        <div class="action-buttons">
                            <button type="button" class="btn btn-success" id="offers-save-offer-btn">
                                <i class="fas fa-save"></i> Save Offer
                            </button>
                            <button type="button" class="btn btn-secondary" id="offers-clear-form-btn">
                                <i class="fas fa-times"></i> Clear
                            </button>
                            <button type="button" class="btn btn-danger hidden" id="offers-delete-current-btn">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Coupons Tab Content -->
            <div class="tab-content" id="coupons-content">
                <!-- Sub-tabs for Coupons section -->
                <div class="coupon-sub-tabs" id="couponSubTabs">
                    <div class="coupon-sub-tab active" id="coupons-list-sub-tab-btn">
                        <i class="fas fa-ticket-alt"></i> Coupons
                    </div>
                    <div class="coupon-sub-tab" id="coupons-create-sub-tab-btn">
                        <i class="fas fa-plus"></i> Allot
                    </div>
                </div>

                <!-- Coupons List Tab Content -->
                <div class="coupon-tab-content active" id="couponsListContent">
                    <div class="coupons-layout">
                        <!-- Username Search Section -->
                        <div class="user-coupons-search-section" style="padding: 20px; background: #f8fafc; border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 20px; width: min-content;">
                            <div class="search-header" style="display: flex; align-items: center; margin-bottom: 16px;">
                                <i class="fas fa-user-search" style="color: #6366f1; margin-right: 8px;"></i>
                                <h3 style="margin: 0; color: #374151; font-size: 18px;">Search User Coupons</h3>
                            </div>
                            
                            <div class="search-controls" style="display: flex; gap: 12px;">
                                <div class="username-input-group">
                                    <input type="text" 
                                           id="user-coupons-username-input"
                                           placeholder="Enter username to search..." 
                                           style="padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;">
                                </div>
                                <button class="coupon-primary-search" id="user-coupons-search-btn" 
                                        style="padding: 10px 16px; font-size: 14px; min-width: 120px;">
                                    <i class="fas fa-search"></i> Search
                                </button>
                                <button class="coupon-secondary" id="user-coupons-clear-btn" 
                                        style="padding: 10px 16px; font-size: 14px;">
                                    <i class="fas fa-times"></i> Clear
                                </button>
                            </div>
                        </div>
                        
                        <!-- User Coupons Search Results (Initially Hidden) -->
                        <div class="user-coupons-results" id="userCouponsSearchResults" style="display: none;">
                            <div class="results-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding: 16px; background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 6px;">
                                <div style="display: flex; align-items: center;">
                                    <i class="fas fa-check-circle" style="color: #10b981; margin-right: 8px;"></i>
                                    <span style="color: #065f46; font-weight: 500;">User Coupons Found</span>
                                </div>
                                <button class="coupon-secondary" onclick="window.userCouponsSearch?.exportUserCoupons()" 
                                        style="padding: 6px 12px; font-size: 12px;">
                                    <i class="fas fa-download"></i> Export Results
                                </button>
                            </div>
                            
                            <div class="user-coupons-table">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Coupon Code</th>
                                            <th>Discount</th>
                                            <th>Min Order</th>
                                            <th>Max Discount</th>
                                            <th>Status</th>
                                            <th>Created</th>
                                            <th>Updated</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="userCouponsTableBody">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Default Coupons List (When no search is performed) -->
                        <div class="coupons-list" id="couponsDefaultContent">
                            <div class="coupons-header">
                                <i class="fas fa-ticket-alt"></i> <span id="couponsListTitle">System Coupons List</span>
                            </div>
                            
                            <!-- Search and Filter Controls -->
                            <div class="coupons-controls" style="padding: 16px; background: #f8fafc; border-bottom: 1px solid #e5e7eb;">
                                <div style="display: grid; grid-template-columns: 1fr auto auto; gap: 12px; align-items: center;">
                                    <div class="coupon-search-box">
                                        <input type="text" placeholder="Search system coupons..." 
                                               style="width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;"
                                               id="coupons-search-input">
                                    </div>
                                    <select id="coupons-status-filter" 
                                            style="padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;">
                                        <option value="all">All Status</option>
                                        <option value="true">Used</option>
                                        <option value="false">Available</option>
                                    </select>
                                    <button class="coupon-primary-export" id="coupons-export-btn" 
                                            style="padding: 8px 12px; font-size: 12px;">
                                        <i class="fas fa-download"></i> Export
                                    </button>
                                </div>
                            </div>
                            
                            <div class="coupons-table">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Coupon Code</th>
                                            <th>Discount Value</th>
                                            <th>Used</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="couponsTableBody">
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Inline Edit Form (hidden by default) -->
                        <div class="coupon-inline-edit-form" id="couponInlineEditForm" style="display: none;">
                            <div class="coupon-edit-form-header">
                                <h3><i class="fas fa-edit"></i> <span id="couponEditFormTitle">Edit Coupon</span></h3>
                                <button class="coupon-primary-edit-header-cancel" id="coupons-inline-cancel-btn" style="padding: 6px 12px; font-size: 12px; z-index: 1;">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                            <div class="coupon-edit-form-content">
                                <form id="couponInlineForm">
                                    <!-- Read-only Database Fields -->
                                    <div class="coupon-readonly-section">
                                        <h4><i class="fas fa-database"></i> Database Information</h4>
                                        <div class="coupon-form-row">
                                            <div class="coupon-form-group">
                                                <label>Created At</label>
                                                <input type="text" id="couponInlineCreatedAt" disabled class="readonly-field">
                                            </div>
                                            <div class="coupon-form-group">
                                                <label>Updated At</label>
                                                <input type="text" id="couponInlineUpdatedAt" disabled class="readonly-field">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Editable Fields -->
                                    <div class="coupon-editable-section">
                                        <h4><i class="fas fa-edit"></i> Editable Information</h4>
                                        <div class="coupon-form-row">
                                            <div class="coupon-form-group">
                                                <label>Coupon Code *</label>
                                                <input type="text" id="couponInlineCode" required>
                                            </div>
                                            <div class="coupon-form-group">
                                                <label>Used</label>
                                                <select id="couponInlineUsed">
                                                    <option value="false">Available</option>
                                                    <option value="true">Used</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="coupon-form-row">
                                            <div class="coupon-form-group">
                                                <label>Min Order Value</label>
                                                <input type="number" id="couponInlineMinOrder" min="0" step="1">
                                            </div>
                                            <div class="coupon-form-group">
                                                <label>Discount Type</label>
                                                <select id="couponInlineDiscountType">
                                                    <option value="percentage">Percentage</option>
                                                    <option value="flat">Flat Amount</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="coupon-form-row">
                                            <div class="coupon-form-group">
                                                <label>Discount Value *</label>
                                                <input type="number" id="couponInlineDiscountValue" min="0" step="1" required>
                                            </div>
                                            <div class="coupon-form-group">
                                                <label>Max Discount Amount</label>
                                                <input type="number" id="couponInlineMaxDiscount" min="0" step="1">
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <div class="coupon-inline-form-actions">
                                    <button type="button" class="coupon-success" id="coupons-inline-save-btn">
                                        <i class="fas fa-save"></i> Update Coupon
                                    </button>
                                    <button type="button" class="coupon-primary" id="coupons-inline-cancel-footer-btn">
                                        <i class="fas fa-times"></i> Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Create Coupon Tab Content -->
                <div class="coupon-tab-content" id="couponsCreateContent">
                    <div class="coupon-create-panel-full">
                        <div class="coupon-create-header">
                        </div>
                        <form id="couponForm" class="coupon-form-container">
                            <!-- Editable fields only for create -->
                            <div class="coupon-form-row">
                                <div class="coupon-form-group">
                                    <label>Coupon Code *</label>
                                    <input type="text" id="couponCode" placeholder="e.g., SAVE20" required>
                                </div>
                                <div class="coupon-form-group">
                                    <label>Used</label>
                                    <select id="couponUsed">
                                        <option value="false" selected>Available</option>
                                        <option value="true">Used</option>
                                    </select>
                                </div>
                            </div>

                            <div class="coupon-form-row">
                                <div class="coupon-form-group">
                                    <label>Min Order Value</label>
                                    <input type="number" id="couponMinOrderValue" placeholder="e.g., 6" min="0" step="0.1">
                                </div>
                                <div class="coupon-form-group">
                                    <label>Discount Type *</label>
                                    <select id="couponDiscountType" required>
                                        <option value="percentage">Percentage</option>
                                        <option value="flat">Flat Amount</option>
                                    </select>
                                </div>
                            </div>

                            <div class="coupon-form-row">
                                <div class="coupon-form-group">
                                    <label>Discount Value *</label>
                                    <input type="number" id="couponDiscountValue" placeholder="e.g., 20" min="0" step="0.1" required>
                                </div>
                                <div class="coupon-form-group">
                                    <label>Max Discount Amount</label>
                                    <input type="number" id="couponMaxDiscountAmount" placeholder="e.g., 6" min="0" step="0.1">
                                </div>
                            </div>
                        </form>

                        <div class="coupon-action-buttons">
                            <button type="button" class="coupon-success-create" id="coupons-save-coupon-btn">
                                <i class="fas fa-save"></i> Save Coupon
                            </button>
                            <button type="button" class="coupon-primary-create" id="coupons-clear-form-btn">
                                <i class="fas fa-times"></i> Clear
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Payments Tab Content -->
            <div class="tab-content" id="payments-content">
                <!-- Navigation bar for Payment Portal -->
                <div class="payment-portal-navbar" id="paymentPortalNavigation">
                    <div class="portal-nav-item nav-selected" id="token-allocation-nav-btn">
                        <i class="fas fa-coins"></i> Allot Tokens
                    </div>
                    <div class="portal-nav-item" id="razorpay-management-nav-btn">
                        <i class="fas fa-credit-card"></i> Razorpay Orders
                    </div>
                </div>

                <!-- Token Allocation Section View -->
                <div class="portal-section-view view-active" id="token-allocation-view">
                    <div class="portal-main-wrapper">
                        <div class="portal-title-section">
                            <i class="fas fa-coins"></i>
                            <h3>Token Allocation System</h3>
                        </div>
                        
                        <!-- Mode Selection Tabs -->
                        <div class="token-allocation-modes" id="tokenAllocationModes">
                            <div class="token-mode-tab token-mode-active" id="single-mode-tab">
                                <i class="fas fa-user"></i> Single Mode
                            </div>
                            <div class="token-mode-tab" id="bulk-mode-tab">
                                <i class="fas fa-users"></i> Bulk Mode
                            </div>
                        </div>

                        <!-- Single Mode Content -->
                        <div class="token-mode-content token-mode-content-active" id="single-mode-content">
                            <div class="token-mode-header">
                                <i class="fas fa-user-plus"></i>
                                <h4>Single User Token Allocation</h4>
                                <p>Allocate tokens to a single user with specific agent and model</p>
                            </div>
                            
                            <form id="singleTokenForm" class="token-allocation-form">
                                <div class="token-form-row">
                                    <div class="token-form-group">
                                        <label>Username *</label>
                                        <input type="text" id="singleUsername" placeholder="Enter username" required>
                                    </div>
                                    <div class="token-form-group">
                                        <label>Agent ID *</label>
                                        <input type="text" id="singleAgentId" placeholder="AGT-50345a8fdb40c313" required>
                                    </div>
                                </div>
                                
                                <div class="token-form-row">
                                    <div class="token-form-group">
                                        <label>Model Name *</label>
                                        <input type="text" id="singleModelName" placeholder="e.g., gpt-4, claude-3-sonnet, gemini-pro" required>
                                        <small class="token-hint">Enter the AI model name (e.g., gpt-4, gpt-3.5-turbo, claude-3-sonnet, gemini-pro)</small>
                                    </div>
                                    <div class="token-form-group">
                                        <label>Tokens to Add/Deduct *</label>
                                        <input type="number" id="singleTokensToAdd" placeholder="30 or -10" step="1" required>
                                        <small class="token-hint">Use positive values to add tokens, negative to deduct</small>
                                    </div>
                                </div>
                            </form>
                            
                            <div class="token-action-buttons">
                                <button type="button" class="token-success" id="single-allocate-btn">
                                    <i class="fas fa-coins"></i> Allocate Tokens
                                </button>
                                <button type="button" class="token-secondary" id="single-clear-btn">
                                    <i class="fas fa-times"></i> Clear Form
                                </button>
                            </div>
                        </div>

                        <!-- Bulk Mode Content -->
                        <div class="token-mode-content" id="bulk-mode-content">
                            <div class="token-mode-header">
                                <i class="fas fa-users-cog"></i>
                                <h4>Bulk Token Allocation</h4>
                                <p>Allocate tokens to multiple users at once</p>
                            </div>
                            
                            <!-- Bulk Entry Methods -->
                            <div class="bulk-entry-methods">
                                <div class="bulk-method-tabs">
                                    <div class="bulk-method-tab bulk-method-active" id="manual-entry-tab">
                                        <i class="fas fa-keyboard"></i> Manual Entry
                                    </div>
                                    <div class="bulk-method-tab" id="json-import-tab">
                                        <i class="fas fa-code"></i> JSON Import
                                    </div>
                                </div>
                                
                                <!-- Manual Entry Form -->
                                <div class="bulk-entry-content bulk-entry-active" id="manual-entry-content">
                                    <div class="bulk-users-container" id="bulkUsersContainer">
                                        <!-- Dynamic user entries will be added here -->
                                    </div>
                                    
                                    <div class="bulk-controls">
                                        <button type="button" class="token-primary" id="add-bulk-user-btn">
                                            <i class="fas fa-plus"></i> Add User
                                        </button>
                                        <button type="button" class="token-secondary" id="clear-all-bulk-btn">
                                            <i class="fas fa-trash"></i> Clear All
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- JSON Import Form -->
                                <div class="bulk-entry-content" id="json-import-content">
                                    <div class="json-import-section">
                                        <label>JSON Data *</label>
                                        <textarea id="jsonImportData" rows="10" placeholder='[
  { "username": "user1", "agentId": "USER123AGENT789ABC1", "modelName": "gpt-4", "tokensToAdd": 50 },
  { "username": "user2", "agentId": "USER456AGENT012DEF2", "modelName": "gpt-3.5-turbo", "tokensToAdd": -10 }
]'></textarea>
                                        <small class="token-hint">Paste your JSON array with user token allocation data</small>
                                    </div>
                                    
                                    <div class="json-controls">
                                        <button type="button" class="token-primary" id="validate-json-btn">
                                            <i class="fas fa-check"></i> Validate JSON
                                        </button>
                                        <button type="button" class="token-secondary" id="clear-json-btn">
                                            <i class="fas fa-times"></i> Clear
                                        </button>
                                    </div>
                                    
                                    <div class="json-validation-result" id="jsonValidationResult" style="display: none;"></div>
                                </div>
                            </div>
                            
                            <div class="bulk-action-buttons">
                                <button type="button" class="token-success" id="bulk-allocate-btn">
                                    <i class="fas fa-users"></i> Allocate Bulk Tokens
                                </button>
                                <button type="button" class="token-warning" id="bulk-preview-btn">
                                    <i class="fas fa-eye"></i> Preview Changes
                                </button>
                            </div>
                        </div>
                        
                        <!-- Results Section -->
                        <div class="token-results-section" id="tokenResultsSection" style="display: none;">
                            <div class="results-header">
                                <i class="fas fa-chart-line"></i>
                                <h4>Allocation Results</h4>
                            </div>
                            <div class="results-content" id="tokenResultsContent">
                                <!-- Results will be displayed here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Razorpay Management Section View -->
                <div class="portal-section-view" id="razorpay-management-view">
                    <div class="portal-main-wrapper">
                        <div class="portal-title-section">
                            <i class="fas fa-credit-card"></i>
                            <h3>Razorpay Management System</h3>
                        </div>
                        <div class="portal-temp-content">
                            <i class="fas fa-credit-card"></i>
                            <h4>Order Processing & Management</h4>
                            <p>This section will contain functionality to manage Razorpay orders.<br>
                               You can implement the order processing features here.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>